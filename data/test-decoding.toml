"$schema" = "https://raw.githubusercontent.com/dougEfresh/kiro-generator/refs/heads/main/schemas/kg.json"

[agents.test]
useLegacyMcpJson = true
inherits = ["parent"]
description = "This is a test agent"
prompt = "Generate a test prompt"
resources = ["file://resource.md", "file://README.md"]
tools = ["*"]
allowedTools = ["@awsdocs"]

[agents.test.subagents]
allow = ["backend"]

[agents.test.hooks.agentSpawn.spawn]
command = "echo i have spawned"

[agents.test.hooks.userPromptSubmit.submit]
command = "echo user submitted"

[agents.test.hooks.postToolUse.post]
command = "echo after tool"

[agents.test.hooks.stop.stop]
command = "echo stopped"

[agents.test.hooks.preToolUse.pre]
command = "echo before tool"
matcher = "git.*"

[agents.test.mcpServers.awsdocs]
command = "aws-docs"
args = ["--verbose", "--config=/path"]
timeout = 5000

[agents.test.mcpServers.awsdocs.env]
RUST_LOG = "debug"
PATH = "/usr/bin"

[agents.test.mcpServers.awsdocs.headers]
Authorization = "Bearer token"

[agents.test.toolAliases]
execute_bash = "shell"

[agents.test.nativeTools.write]
allow = ["./src/*", "./scripts/**"]
deny = ["Cargo.lock"]
forceAllow = ["/tmp", "/var/log"]

[agents.test.nativeTools.shell]
denyByDefault = true
allow = ["git status .*"]
deny = ["git push .*"]
forceAllow = ["git pull .*"]

[agents.test.nativeTools.glob]
allow = ["./src/**", "./tests/**"]
deny = ["/etc/**"]
autoAllowReadonly = true

[agents.test.nativeTools.grep]
allow = ["./src/**", "./docs/**"]
deny = ["/var/**"]

[agents.test.nativeTools.web-fetch]
allow = [".*github\\.com.*", ".*docs\\.rs.*"]
deny = [".*pastebin\\.com.*"]

[agents.test.toolSettings.whoami]
env = { LOG_LEVEL = "debug" }
