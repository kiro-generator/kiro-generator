{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "$schema": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    },
    "allowedTools": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of tools the agent is explicitly allowed to use | kiro_schema_path = #/properties/allowedTools"
    },
    "description": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "This field is not model facing and is mostly here for users to discern between agents | kiro_schema_path = #/properties/description"
    },
    "hooks": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "cache_ttl_seconds": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "How long the hook output is cached before it will be executed again\n (default: 0s)"
            },
            "command": {
              "type": "string",
              "description": "The command to run when the hook is triggered"
            },
            "matcher": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional glob matcher for hook\n Currently used for matching tool name of PreToolUse and PostToolUse hook"
            },
            "max_output_size": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Max output size of the hook before it is truncated (default: 10240\n bytes)"
            },
            "timeout_ms": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Max time the hook can run before it throws a timeout error (default:\n 30000ms)"
            }
          },
          "required": [
            "command"
          ],
          "additionalProperties": false,
          "title": "KgHook"
        }
      },
      "description": "Commands to run when a chat session is created | kiro_schema_path = #/properties/hooks"
    },
    "keyboardShortcut": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "Keyboard shortcut for swapping to this agent (e.g., \"ctrl+shift+a\", \"shift+tab\") | kiro_schema_path = #/properties/keyboardShortcut"
    },
    "knowledge": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "autoUpdate": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "indexType": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "additionalProperties": false,
        "title": "KgKnowledge"
      },
      "description": "Knowledge bases to include in the agent's context | kiro_schema_path = #/properties/resources"
    },
    "mcpServers": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "args": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "A list of arguments to be used to run the command with"
          },
          "command": {
            "type": "string",
            "description": "The command string used to initialize the MCP server"
          },
          "env": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "A list of environment variables to run the command with"
          },
          "headers": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "HTTP headers to include when communicating with HTTP-based MCP servers"
          },
          "state": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "enabled",
                  "disabled"
                ],
                "description": "The operational state of an MCP server.",
                "title": "McpServerState"
              },
              {
                "type": "null"
              }
            ],
            "description": "MCP server operational state (\"enabled\" or \"disabled\", maps to disabled\n boolean in JSON)"
          },
          "timeout": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "description": "Timeout for each MCP request in milliseconds"
          },
          "url": {
            "type": "string",
            "description": "The URL for HTTP-based MCP server communication"
          }
        },
        "additionalProperties": false,
        "description": "MCP server configuration for agent definitions.",
        "title": "KgCustomToolConfig"
      },
      "description": "Configuration for Model Context Protocol (MCP) servers | kiro_schema_path = #/properties/mcpServers"
    },
    "model": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "The model ID to use for this agent. If not specified, uses the default model. | kiro_schema_path = #/properties/model"
    },
    "nativeTools": {
      "type": "object",
      "properties": {
        "aws": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "AwsTool"
        },
        "glob": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "GlobTool"
        },
        "grep": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "GrepTool"
        },
        "read": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "ReadTool"
        },
        "shell": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "ExecuteShellTool"
        },
        "web-fetch": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "WebFetchTool"
        },
        "write": {
          "type": "object",
          "properties": {
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "autoAllowReadonly": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyByDefault": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "forceAllow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "title": "WriteTool"
        }
      },
      "additionalProperties": false,
      "description": "Native tool settings (shell, read, write, etc.) merged into toolsSettings. | kiro_schema_path = #/properties/toolsSettings",
      "title": "NativeTools"
    },
    "prompt": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "The intention for this field is to provide high level context to the agent. This should be seen as the same category of context as a system prompt. | kiro_schema_path = #/properties/prompt"
    },
    "resources": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Files to include in the agent's context | kiro_schema_path = #/properties/resources"
    },
    "subagents": {
      "type": "object",
      "properties": {
        "allow": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "deny": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false,
      "description": "Allow/deny lists for subagents, emitted into toolsSettings.subagent. | kiro_schema_path = #/properties/toolsSettings",
      "title": "SubagentConfig"
    },
    "toolAliases": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      },
      "description": "Tool aliases for remapping tool names | kiro_schema_path = #/properties/toolAliases"
    },
    "toolSettings": {
      "type": "object",
      "additionalProperties": {
        "description": "A dynamic value that can hold null, bool, number, string, bytes, array, or object."
      },
      "description": "Additional toolsSettings entries merged into toolsSettings. | kiro_schema_path = #/properties/toolsSettings"
    },
    "tools": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of tools the agent can see. Use \"@{MCP_SERVER_NAME}/tool_name\" to specify tools from mcp servers. To include all tools from a server, use \"@{MCP_SERVER_NAME}\" | kiro_schema_path = #/properties/tools"
    },
    "useLegacyMcpJson": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ],
      "description": "Whether or not to include the legacy global MCP configuration in the agent. You can reference tools brought in by these servers just as you would with the servers you configure in the mcpServers field in this config. | kiro_schema_path = #/properties/useLegacyMcpJson"
    },
    "welcomeMessage": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "Welcome message displayed when switching to this agent | kiro_schema_path = #/properties/welcomeMessage"
    }
  },
  "additionalProperties": false,
  "description": "Definition for kg agents, .kiro/generators/agents, excluding inheritance",
  "title": "KgAgentFileDoc"
}
